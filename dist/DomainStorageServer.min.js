!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("DomainStorageServer",[],t):"object"==typeof exports?exports.DomainStorageServer=t():e.DomainStorageServer=t()}(self,(function(){return(()=>{"use strict";var e,t,o={d:(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},r={};o.d(r,{default:()=>c});var n=[],a=function(){if(void 0!==e)return e;if(window&&window.postMessage){if(document.referrer)return t=new URL(document.referrer).origin,e=this;console.error("No referrer found")}else console.error("Missing feature support. Exiting!")},i=function(e){return e.split(".").slice(-2).join(".")},s=function(e,o,r){window.top.postMessage({type:"domain_storage_msg",actionId:e,success:o,response:r},t)};a.prototype={start:function(){window.addEventListener("message",(function(e){if(o=e.origin,r=new URL(o).hostname,(n.includes(r)||i(r)===i(window.location.hostname))&&"domain_storage_msg"===e.data.type){var t=e.data;!function(e,t,o){var r="DomainStorage::".concat(o.key);switch(e){case"getItem":return s(t,!0,localStorage.getItem(r));case"setItem":return s(t,!0,localStorage.setItem(r,o.value));case"removeItem":return s(t,!0,localStorage.removeItem(r));default:s(t,!1,new Error("Invalid action request"))}}(t.action,t.actionId,function(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(t,["action","actionId"]))}var o,r}),!1),window.top.postMessage({type:"domain_storage_msg",ready:!0},t)},setTrustedDomains:function(e){e instanceof Array&&(n=e)}};const c=new a;return r.default})()}));
//# sourceMappingURL=DomainStorageServer.min.js.map