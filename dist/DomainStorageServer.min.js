!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("DomainStorageServer",[],t):"object"==typeof exports?exports.DomainStorageServer=t():e.DomainStorageServer=t()}(self,(function(){return(()=>{"use strict";var e,t,r={d:(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},o={};r.d(o,{default:()=>c});var n=[],a=function(){if(void 0!==e)return e;if(window&&window.postMessage){if(document.referrer)return t=new URL(document.referrer).origin,e=this;console.error("No referrer found")}else console.error("Missing feature support. Exiting!")},i=function(e){return e.split(".").slice(-2).join(".")},s=function(e,r,o){window.parent.postMessage({type:"domain_storage_msg",actionId:e,success:r,response:o},t)};a.prototype={start:function(){window.addEventListener("message",(function(e){if(r=e.origin,o=new URL(r).hostname,(n.includes(o)||i(o)===i(window.location.hostname))&&"domain_storage_msg"===e.data.type){var t=e.data;!function(e,t,r){var o="DomainStorage::".concat(r.key);switch(e){case"getItem":return s(t,!0,localStorage.getItem(o));case"setItem":return s(t,!0,localStorage.setItem(o,r.value));case"removeItem":return s(t,!0,localStorage.removeItem(o));default:s(t,!1,new Error("Invalid action request"))}}(t.action,t.actionId,function(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(t,["action","actionId"]))}var r,o}),!1),window.parent.postMessage({type:"domain_storage_msg",ready:!0},t)},setTrustedDomains:function(e){e instanceof Array&&(n=e)}};const c=new a;return o.default})()}));
//# sourceMappingURL=DomainStorageServer.min.js.map